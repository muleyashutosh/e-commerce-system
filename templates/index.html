<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome</title>
    <link rel="icon" href="{{url_for('static', filename = 'styles/cart-2-512.png')}}" type="image/x-icon">
    <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{url_for('static', filename = 'styles/style.css')}}">
<body>
    <div class = 'headerClass col-12'>   
        <h2 align = 'center'>El Carto</h2>
    </div>
    <div class = 'mainClass' id = 'main' align = 'center'>
        <div align = 'center' class = 'switchHead'>
            <div class = 'col-6' id = 'login-btn' onclick="showForm('login')"><strong>Login</strong></div>
            <div class = 'col-6' id = 'signup-btn' onclick="showForm('signup')"><strong>Signup</strong></div>
        </div>
        <div class = 'formsClass col-12' id= 'forms'>
            <div id = 'login' class = 'loginClass'>
                <br><br><br>
                <form name = 'loginform' action = "/" id = 'loginform' method="POST"> 
                    <div>
                        <input id = 'emailLog' class = 'inputClass' onfocusout='checker1(this)' onfocus="checker2(this)" type = 'email' name = 'email' value='' required>
                        <label for = 'email' id = 'emailLogLab'>Email</label>
                    </div>
                    <div>
                        <input class = 'inputClass' id = 'passIn' type='password' value="" name = 'pwd' required>
                        <label>Password</label>
                        <img id = 'eye' onclick="showPass()" src = '{{url_for('static', filename = 'styles/showPassNormal.svg')}}'>
                    </div>    
                    
                    <div class = 'errMsg' id = 'error'>*Invalid email / password</div>
                    <input type = 'hidden' name = 'login'><br>
                    <input class = 'submit' type = 'submit' value = 'Login'><br>
                </form>
        
            </div>
            <div id ='signup' class = 'signupClass'>
                <br><br><br>
                <form name = 'signupform' action="/" id = 'signupform' method = 'POST'> 
                    <div>
                       <input class = 'inputClass' name = 'firstName' value="" type = 'text' required>
                       <label for = 'firstName'>First Name</label>
                    </div>
                    <div>
                        <input class = 'inputClass' name = 'lastName' value="" type = 'text' required>
                        <label for = 'lastName'>Last Name</label>
                    </div>
                    <div>   
                        <input class = 'inputClass' id= 'emailSign' name = 'email' onfocusout='checker1(this)' onfocus="checker2(this)" value="" type = 'email' required>
                        <label for = 'email' id = 'emailSignLab'>Email</label>
                    </div>
                    <div>   
                        <input class = 'inputClass' type='password' value="" name = 'pwd' required>
                        <label>Password</label>
                    </div>
                    <div>
                        <input class = 'inputClass' id = 'mob' type = 'tel' onfocusout='checker1(this)' onfocus="checker2(this)" pattern = '[1-9][0-9]{9}' value="" name = 'pno' required>
                        <label for = 'mob_no' id = 'mobLab'>Mobile No.</label>
                    </div>
                    <input type = 'hidden' name = 'signup'><br>
                    <input class = 'submit' type = 'submit' value= 'Create an Account'><br>
        
                </form>
        
            </div>

        </div>
        
    </div>
</body>



<script> 
    function showForm(id) {
        if(id === 'login') {
            var curr = 'login';
            var other = 'signup';
            // document.getElementById('forms').style.boxShadow = '10px 10px 8px #888888';
            // document.getElementById('main').style.boxShadow = 'none';
        }
        else {
            var curr = 'signup'
            var other = 'login'
            document.getElementById('forms').style.boxShadow = 'none';
            // document.getElementById('main').style.boxShadow = '10px 10px 8px #888888';
        }
        document.getElementById(curr).style.display = 'block';
        document.getElementById(curr + '-btn').style.backgroundColor = '#e1e6e2';
        document.getElementById(other + '-btn').style.backgroundColor = '#a4a6a6';
        document.getElementById(other).style.display = 'none';

    }

    function showPass() {
        var x = document.getElementById('passIn')
        var eye = document.getElementById('eye')
        if(x.type === 'password') {
            x.type = 'text';
            eye.src = "{{url_for('static', filename = 'styles/showPassSelected.svg')}}"
        }
        else {
            x.type = 'password';
            eye.src = "{{url_for('static', filename = 'styles/showPassNormal.svg')}}"
        }
    }
    
    document.getElementById('emailIN').addEventListener('focus', myFunction);
    document.getElementById('passIn').addEventListener('focus', myFunction);

    function myFunction() {
        document.getElementById('error').style.display = 'none';
    }

    function checker1(x) {
       if(x.value != '' && !x.checkValidity()) {
            x.style.border = '2px solid #d32710';
            var label = document.getElementById(x.id +'Lab')
            label.style.zIndex = 1;
            label.style.color = '#d32710';
            label.style.fontWeight = 'bold';
            label.style.top = '-20px';
       }
       else if(x.value == ''){
            x.style.border = '2px solid #2d2d2d';
            var label = document.getElementById(x.id +'Lab')
            label.zIndex = '-1'
            label.style.color = '#999';
            label.style.top = '3px';
       }
       else if(x.value != '' && x.checkValidity()) {
            x.style.border = '2px solid #2d2d2d';
            var label = document.getElementById(x.id +'Lab')
            label.style.color = '#2d2d2d';
       }
    }

    function checker2(x) {

        var label = document.getElementById(x.id +'Lab')
        // console.log(label.style.color)
        label.style.zIndex = 1;
        if(label.style.color != 'rgb(211, 39, 16)') {
            label.style.color = '#2f2f2f';
            label.style.fontWeight = 'bold';
            label.style.top = '-20px';
        }
            
        
    }



</script>
{% if login_status == True %}
    <script>
        alert('Logged in Successfully')
    </script>
{% elif login_status == False %}
    <script>
        document.getElementById('error').style.display = 'block';
    </script>
{% endif %}

</html>