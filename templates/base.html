<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>{% block title %} {% endblock %}</title>
        <link rel="icon" href="https://ik.imagekit.io/milyzn5unt/e-commerce-system/shopping-cart_g2lAzjYlj.svg" type="image/x-icon">
        <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;1,300&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="{{url_for('static', filename = 'styles/base.css')}}">
        <script src="https://kit.fontawesome.com/d591665a2d.js" crossorigin="anonymous"></script>
        <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
        {% block head %} {% endblock %}
    <body>
        <div id='header' class = 'headerClass'>   
            <h2><a href="
                {% if 'C' in session['userID'] %}
                    {{ url_for('home') }}
                {% else %}
                    {{ url_for('sellerHome') }}
                {% endif %}
                ">
                </a>
            </h2>
            <div id = 'searchfield'><div id='search-icon'></div><input type="search" name="search" id="search" placeholder="Search.."></div>
            <a title= 'Logout' href="{{ url_for('logout')}}"><div class = 'logout'></div></a>
            <div class='dropDown'>
                <a id = 'dropbtn' title= 'Profile'><div id='drop-btn' class="fas fa-user profile"></div></a>
                <div class = 'dropdown-content' id = 'drop-content'>
                    <a href="
                    {% if 'C' in session['userID'] %}
                        {{ url_for('profile') }}
                    {% else %}
                        {{ url_for('sellerProfile') }}
                    {% endif %}
                    ">Hello, {{ firstname }}<hr> <span>Edit Profile</span></a>
                    <a href="#">My Orders</a>
                </div>
            </div>
            <a id = 'cart' title= 'Cart' href="{{ url_for('cart') }}"><div class = 'cart'></div></a>
        </div>
        <div id = 'content'>
            {% block body %} {% endblock %}
        </div>
        
    </body>


    <script>
    $(document).ready(function() {
        function switchClass() {
            if($('#drop-btn').hasClass('fas fa-user profile')) {
                $('#drop-btn').removeClass('fas fa-user profile').addClass('fas fa-user')
            }
            else {
                $('#drop-btn').removeClass('fas fa-user').addClass('fas fa-user profile')
            }
        
        }
        $('#dropbtn').click(function() {
            $('#drop-content').slideToggle();    
            switchClass();
        })

        $('#search').focusin(function() {
            $('#search').css('border', '3px solid #fdc100')
            $('#search').css('border-left', 'none')
            $('#search-icon').css('border', '3px solid #fdc100')
            $('#search-icon').css('border-right', 'none')
            
        })
        $('#search').focusout(function() {
            $('#search').css('border', 'none')
            $('#search-icon').css('border', 'none')
        })

        $('#search-icon').click(function() {
            $('#search').focus();
        }) 

        window.onclick = function(e) {
            if (!e.target.matches('#dropbtn') && !e.target.matches('#drop-btn')) {
                $('#drop-content').slideUp();
                if($('#drop-content').css('display') == 'block')
                    switchClass();
            }
            
        }

        window.onscroll = function(){makeSticky();}
        var header = document.getElementById('header')
        var sticky = header.offsetTop;
        function makeSticky() {
            if(window.pageYOffset > sticky) {
                header.classList.add('sticky');
            }
            else {
                header.classList.remove('sticky');
            }
        }

    })


    </script>
    {% block scripts %} {% endblock %}
    


</html>
